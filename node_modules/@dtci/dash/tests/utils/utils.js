import http from "k6/http";
import { group, check, sleep } from "k6";

import { url } from "./url.js";

export const reqAndWait = url => {
  const res = http.get(url, {
    cookies: {
      access_token: __ENV.ACCESS_TOKEN
    }
  });
  check(res, {
    "Status 200": res => res.status === 200
  });
  sleep(1);
};

export const reqPages = pages => {
  pages.forEach(page => {
    group(page.title, () => {
      reqAndWait(`${url}/${page.url}`);
    });
  });
};
