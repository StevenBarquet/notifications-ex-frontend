!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var r=t();for(var n in r)("object"==typeof exports?exports:e)[n]=r[n]}}(this,(function(){return function(){"use strict";var e={n:function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(r,{a:r}),r},d:function(t,r){for(var n in r)e.o(r,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:r[n]})},o:function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r:function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{default:function(){return ee}});var r=require("@babel/runtime/helpers/asyncToGenerator"),n=e.n(r),o=require("@babel/runtime/helpers/defineProperty"),a=e.n(o),i=require("@babel/runtime/helpers/toConsumableArray"),l=e.n(i),s=require("@babel/runtime/helpers/slicedToArray"),c=e.n(s),u=require("@babel/runtime/regenerator"),d=e.n(u),b=require("react"),p=require("classnames"),f=e.n(p),g=require("ag-grid-react");function v(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function h(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?v(Object(r),!0).forEach((function(t){a()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var m=function(e){return e.childCount},y=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e.data&&e.selectable&&(t&&!e.group||!t)},O=function(e){var t=[];return e.forEachNode((function(e){y(e)&&(e.isSelected()||e.setSelected(!0,void 0,!0),t.push(e.data))})),t},j=function(e){var t=0,r=0;return e.forEachNode((function(e){y(e)&&(t++,e.isSelected()&&r++)})),r>0&&t===r},w={groupSelectionId:void 0,groupToExpandByDefault:void 0,shouldSelectAll:!1,expandedAutoHeightRows:[]},S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.join("-")},_=function(e){var t;return(null===(t=x(e))||void 0===t?void 0:t.context)||w},x=function(e){var t;return null==e||null===(t=e.gridOptionsService)||void 0===t?void 0:t.gridOptions},P=function(e,t){var r=_(e);x(e)&&(x(e).context=h(h({},r),t))},k=function(e){var t,r,n,o,a;if(!e.group)return[];var i=null!==(t=null===(r=e.childStore)||void 0===r?void 0:r.allRowNodes)&&void 0!==t?t:Object.values((null==e||null===(n=e.childStore)||void 0===n||null===(o=n.cache)||void 0===o?void 0:o.nodeIndexMap)||{});if(i&&Boolean(i.length))return i;var s=null==e||null===(a=e.childStore)||void 0===a?void 0:a.blocks;if(s){var c=[];return Object.keys(s).forEach((function(e){var t=s[e],r=Object.keys(t.allNodesMap).map((function(e){return t.allNodesMap[e]}));c.push.apply(c,l()(r))})),c}return[]},C=function e(t,r){var n=!1,o=null==t?void 0:t.parent;if(o&&-1!==(null==o?void 0:o.level)){if(r){var a=k(o);n=Boolean(a.length)&&a.every((function(e){return e.isSelected()}))}o.setSelected(n,void 0,!0);var i=null==o?void 0:o.parent;i&&-1!==(null==i?void 0:i.level)&&e(o,n)}},D=function e(t,r,n,o){o&&t.id===o&&P(n,{groupSelectionId:o});var a=k(t);(null==a?void 0:a.length)>0&&a.forEach((function(o){o.setSelected(r),C(t,r),e(o,r,n)}))},N=require("@babel/runtime/helpers/objectWithoutProperties"),R=e.n(N),M=require("react/jsx-runtime"),E=["className","option","onChange","disabled","checked","defaultChecked","inputProps","inputRef","isError","testMetadata"];function z(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function A(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?z(Object(r),!0).forEach((function(t){a()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):z(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var T=function(e){var t=e.className,r=e.option,n=e.onChange,o=e.disabled,a=e.checked,i=e.defaultChecked,l=e.inputProps,s=e.inputRef,c=e.isError,u=void 0!==c&&c,d=e.testMetadata,p=R()(e,E),g=(0,b.useMemo)((function(){return f()("sb-checkbox__input",{"sb-checkbox_error":u},null==l?void 0:l.className)}),[l,u]),v=(0,b.useMemo)((function(){return f()("sb-checkbox",t,{"sb-checkbox_disabled":o})}),[t,o]),h=(0,b.useCallback)((function(){return null==n?void 0:n(r.value)}),[n,r.value]);return(0,M.jsx)("div",A(A({},p),{},{className:v,children:(0,M.jsxs)("label",{htmlFor:String(r.id),className:"sb-checkbox__label",children:[(0,M.jsx)("input",A(A(A({type:"checkbox",name:String(r.name||r.id),id:String(r.id),disabled:o,checked:a,onChange:h,defaultChecked:i,role:"checkbox",ref:s},d),l),{},{className:g})),(0,M.jsxs)("div",{children:[(0,M.jsx)("div",{className:"sb-checkbox__label-text",children:r.label}),r.helpText&&(0,M.jsx)("div",{className:"sb-checkbox__helper",children:r.helpText})]})]})}))},G=(0,b.memo)((function(e){var t=e.api,r=e.node,n=e.value,o=(0,b.useState)((function(){return j(t)})),a=c()(o,2),i=a[0],l=a[1],s=!0===(null==r?void 0:r.group);(0,b.useEffect)((function(){var e=function(){var e=j(t);P(t,{shouldSelectAll:e}),l(e)};return t.addEventListener("rowSelected",e),function(){t.removeEventListener("rowSelected",e)}}),[t]);var u=(0,b.useCallback)((function(){if(!s){var e=!i;P(t,{shouldSelectAll:e}),e?O(t):function(e){e.deselectAll()}(t),l(e)}}),[i,t,s]);return(0,M.jsxs)("div",{className:"sb-checkbox-header__container","data-testid":"DataGrid_SelectAllHeader_Cell",children:[s&&(0,M.jsx)("span",{className:"sb-datagrid_group-row_label","data-testid":"DataGrid_Group_Label",children:n}),(0,M.jsx)(T,{className:"sb-checkbox_no-label","data-testid":"DataGrid_SelectAllHeader",onChange:u,checked:i,option:{value:0,label:"",id:0}})]})})),H=["className","alt"];function I(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var q=(0,b.forwardRef)((function(e,t){var r=e.className,n=e.alt,o=void 0===n?"":n,i=R()(e,H);return(0,M.jsx)("img",function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?I(Object(r),!0).forEach((function(t){a()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):I(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({alt:o,className:f()("sb-image",r),ref:t},i))})),F=q,B="".concat("https://dtci-spellbook.s3-us-west-2.amazonaws.com","/img"),L="".concat(B,"/icons");function W(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function K(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?W(Object(r),!0).forEach((function(t){a()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):W(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var U=function(e){var t=e.size,r=e.iconType,n=e.faPackage,o=void 0===n?"fab":n,a=e.iconName,i=e.className,l=e.altText,s=e.title,c=e.testMetadata,u=void 0===c?{iconAWSImage:{"data-testid":"aws-icon"},iconFASpan:{"data-testid":"fa-icon"}}:c,d=(0,b.useMemo)((function(){return f()("sb-icon",{"sb-icon__size-auto":"auto"===t,"sb-icon__size-smaller":"smaller"===t,"sb-icon__size-small":"small"===t,"sb-icon__size-medium":"medium"===t,"sb-icon__size-large":"large"===t,"sb-icon__size-larger":"larger"===t},i)}),[t,i]);return"aws"===r?(0,M.jsx)(F,K(K({className:d,alt:l,title:s},null==u?void 0:u.iconAWSImage),{},{src:"".concat(L,"/").concat(a,".svg")})):(0,M.jsx)(M.Fragment,{children:(0,M.jsx)("span",K(K({},null==u?void 0:u.iconFASpan),{},{className:f()(["".concat(o," ").concat(a," ").concat(d),o,a]),"aria-label":l,title:s}))})},V=["className","style","shape","size","color","light","badgeRole","children","showClose","testMetadata","width","title","iconOnly"];function J(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Q(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?J(Object(r),!0).forEach((function(t){a()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):J(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var X=function(e){var t=e.className,r=e.style,n=e.shape,o=e.size,a=e.color,i=e.light,l=e.badgeRole,s=e.children,c=e.showClose,u=e.testMetadata,d=e.width,p=e.title,g=e.iconOnly,v=R()(e,V),h=(0,b.useMemo)((function(){return f()("sb-badge",{"sb-badge_dot":!g&&"dot"===n,"sb-badge_circle":"circle"===n||g,"sb-badge_status":!g&&"status"===n,"sb-badge_pill":!n&&!g||"pill"===n,"sb-badge_smaller":"smaller"===o,"sb-badge_small":!o||"small"===o,"sb-badge_medium":"medium"===o,"sb-badge_large":"large"===o,"sb-badge_primary":"primary"===a,"sb-badge_secondary":"secondary"===a,"sb-badge_base":"base"===a,"sb-badge_error":"error"===a,"sb-badge_success":"success"===a,"sb-badge_warning":"warning"===a,"sb-badge_active":"active"===a,"sb-badge_light":i,"sb-badge_closable":c,"sb-badge_width-auto":"auto"===d,"sb-badge_width-large":"large"===d,"sb-badge_icon":g},t)}),[t,a,i,n,c,o,d,g]);return(0,M.jsxs)("div",Q(Q(Q({},v),{},{className:h,style:r,role:l,title:p},u),{},{children:["status"===n&&(0,M.jsx)(U,{className:"sb-badge_status-icon",iconType:"fa",faPackage:"fas",iconName:"fa-circle",size:"smaller"}),s]}))},Y=function(e){var t=e.node,r=e.value;return(0,M.jsxs)("div",{className:"sb-datagrid_group-row","data-testid":"DataGrid_Group_Row",children:[(0,M.jsx)("span",{className:"sb-datagrid_group-row_label","data-testid":"DataGrid_Group_Label",children:r}),(0,M.jsx)(X,{shape:"pill",size:"small",className:"sb-datagrid_group-row_count",testMetadata:{"data-testid":"DataGrid_Group_Count"},children:null==t?void 0:t.allChildrenCount})]})};function Z(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function $(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Z(Object(r),!0).forEach((function(t){a()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Z(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var ee=function(e){var t=e.agGrid,r=e.columnDefs,o=e.className,i=e.gridClassName,s=e.dataGridApiRef,u=e.dataGridColumnApiRef,p=e.serverDatasource,v=e.filterable,h=e.sortable,y=e.selectable,j=e.selectMode,x=void 0===j?"multiple":j,k=e.editable,C=e.pasteable,N=e.moveableColumns,R=void 0!==N&&N,E=e.defaultColumnDef,z=e.testMetadata,A=e.dataMode,T=void 0===A?"client":A,H=e.bordered,I=void 0===H?"all":H,q=e.rowSpace,F=void 0!==q&&q,B=e.striped,L=void 0!==B&&B,W=e.theme,K=void 0===W?"ag-theme-sb-data-grid-theme":W,U=e.size,V=void 0===U?"default":U,J=e.autoHeight,Q=e.noResultsMessage,X=void 0===Q?"No results found":Q,Z=e.totalCount,ee=e.isFetching,te=(0,b.useRef)(),re=(0,b.useRef)(),ne=(0,b.useMemo)((function(){return r.some((function(e){return null!=e.rowGroup}))}),[r]),oe=(0,b.useState)(Z),ae=c()(oe,2),ie=ae[0],le=ae[1],se=(0,b.useState)(),ce=c()(se,2),ue=ce[0],de=ce[1],be=(0,b.useCallback)((function(){if(te.current){var e=_(te.current);if(e.shouldSelectAll)O(te.current);else if(e.groupSelectionId){var t,r=null===(t=te.current)||void 0===t?void 0:t.getRowNode(e.groupSelectionId);r&&r.isSelected()&&D(r,!0,te.current,e.groupSelectionId)}}}),[]),pe=(0,b.useCallback)((function(e){if(!e.node.detail&&!e.node.group){var t=function(e,t){return _(e).expandedAutoHeightRows.find((function(e){return e.id===t}))}(e.api,e.node.id);return t?{maxHeight:t.height-8}:void 0}}),[]),fe=(0,b.useMemo)((function(){var e=[];return y&&("server"!==T||ne?"multiple"===x&&e.push({headerClass:"sb-checkbox-header ag-cell-flex",cellClass:"sb-checkbox-cell ag-cell-no-border ag-cell-flex",checkboxSelection:!0,field:"checkbox",headerCheckboxSelection:!0,headerName:"",suppressSizeToFit:!0,suppressAutoSize:!0,type:"component",width:48,flex:0,sortable:!1,filter:!1,menuTabs:[],lockPosition:!0,resizable:!1}):e.push({cellClass:"sb-checkbox-grid",checkboxSelection:!0,field:"checkbox",headerCheckboxSelection:!0,headerComponentFramework:G,suppressSizeToFit:!0,suppressAutoSize:!0,type:"component",width:57,flex:0})),e.push.apply(e,l()(r.map((function(e){return null!=e&&e.width||null!=e&&e.flex?e:$($({},e),{},{flex:1})})))),e}),[r,y,x,T,ne]),ge=(0,b.useCallback)((function(e){var t;D(e.node,e.node.isSelected()||!1,e.api,null==e||null===(t=e.node)||void 0===t?void 0:t.id)}),[]),ve=(0,b.useCallback)((function(){if("server"===T&&p){var e=function(){var e=n()(d().mark((function e(t){var r,n,o,a,i;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==p||p.getRows(t),r=t.request,n=r.groupKeys,r.rowGroupCols.length>0&&n.length>0&&(a=S(n),null!=(i=null===(o=te.current)||void 0===o?void 0:o.getRowNode(a))&&i.isSelected()&&P(t.api,{groupSelectionId:S(n)}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return $($({},p),{},{getRows:e})}}),[T,p,te]),he=(0,b.useMemo)((function(){var e,n;return $($($($($($($($($($($($($($({defaultColDef:$({menuTabs:v?["filterMenuTab"]:[],lockVisible:!0,lockPinned:!0,resizable:!0,sortable:void 0!==h&&h,filter:void 0!==v&&"agTextColumnFilter",editable:k||!1},E),context:w,enableCellTextSelection:!0,suppressMovableColumns:!R,suppressDragLeaveHidesColumns:!0,headerHeight:48,rowHeight:"large"===V?64:56},ne&&!y&&{groupRowRendererParams:{innerRenderer:Y,suppressCount:!0}}),ne&&y&&{groupRowRendererParams:{innerRenderer:Y,suppressCount:!0,checkbox:!!x}}),"server"===T&&{rowModelType:"serverSide",serverSideStoreType:"partial",serverSideDatasource:ve(),serverSideInfiniteScroll:!0}),ne&&"server"===T&&{getChildCount:m}),y&&"multiple"===x&&{rowSelection:"multiple"}),y&&"single"===x&&{rowSelection:"single",suppressRowClickSelection:!1}),y&&{rowSelection:"multiple"}),X&&{overlayNoRowsTemplate:X}),k&&{singleClickEdit:k}),C&&{enableRangeSelection:!0,rowSelection:"multiple",singleClickEdit:!1}),{},{rowMultiSelectWithClick:!!x,rowBuffer:null!==(e=null==t?void 0:t.rowBuffer)&&void 0!==e?e:50,cacheBlockSize:null!==(n=null==t?void 0:t.cacheBlockSize)&&void 0!==n?n:50,maxBlocksInCache:-1,blockLoadDebounceMillis:1e3,groupDisplayType:"groupRows"},"single"!==x&&{suppressRowClickSelection:!0}),{},{suppressRowHoverHighlight:null==t?void 0:t.masterDetail,suppressMenuHide:!0},F&&function(e){return e.some((function(e){return null==e?void 0:e.autoHeight}))}(r)&&{getRowStyle:pe}),J&&{domLayout:"autoHeight"}),t)}),[v,h,E,ne,T,t,V,y,x,k,C,R,X,pe,F,J,r,ve]),me=(0,b.useCallback)((function(e,t){s&&(s.current=e),u&&(u.current=t)}),[s,u]),ye=(0,b.useCallback)((function(e){te.current=e.api,de(e.api),re.current=e.columnApi,me(e.api,e.columnApi),(null==he?void 0:he.onGridReady)&&(null==he||he.onGridReady(e))}),[he,me]);(0,b.useEffect)((function(){ue&&(le("client"===T?ue.getDisplayedRowCount():Z),"server"===T&&!1===ee&&0===ie||"client"===T&&0===ie?ue.showNoRowsOverlay():ue.hideOverlay())}),[ue,ee,Z,T,he,ie]);var Oe=(0,b.useMemo)((function(){var e;return f()("sb-data-grid",(e={"sb-data-grid_stripeless":!L,"sb-data-grid_borderless":"none"===I,"sb-data-grid_bordered":"all"===I},a()(e,"sb-data-grid_bordered-"+I,"all"!==I&&!ne),a()(e,"sb-data-grid_bordered-horizontal",ne||!(null==t||!t.masterDetail)),a()(e,"sb-data-grid-row-space",F&&!ne),a()(e,"sb-data-grid-grouped",ne),a()(e,"sb-data-grid-master-detail",!(null==t||!t.masterDetail)),a()(e,"sb-data-grid-size_".concat(V),V),e),K,o)}),[K,o,L,I,F,ne,V,null==t?void 0:t.masterDetail]);return(0,M.jsx)("div",$($({className:Oe},null==z?void 0:z.container),{},{children:(0,M.jsx)(g.AgGridReact,$($({className:i},he),{},{onGridReady:ye,columnDefs:fe,noRowsOverlayComponentParams:{noRowsMessage:X},getContextMenuItems:null==t?void 0:t.getContextMenuItems,onModelUpdated:be,onRowSelected:ge}))}))};return t}()}));
//# sourceMappingURL=index.js.map